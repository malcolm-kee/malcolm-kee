---
title: 'Finite State Machine and Statechart'
---

import { Image } from 'astro:assets';
import Aside from '~/components/Aside';
import Figure from '~/components/Figure.tsx';
import reactModel from './_fsm-and-statechart/react-model.excalidraw.png';
import ucmModel from './_fsm-and-statechart/ucm-model.excalidraw.png';
import ucmModelInReact from './_fsm-and-statechart/ucm-model-in-react.excalidraw.png';

## React Model

React allow us to model UI as data flows:

1. rendering that transform data into UI
1. responding to UI event by updating data [^1]

<Figure caption="React Model">
  <Image src={reactModel} alt="React Model" />
</Figure>

## UCM Structure

User interface-control-model is a way to organize UI code by separating them into three layers:

1. User interface
2. Control object
3. Model (shared state)

<Figure caption="UCM Model">
  <Image src={ucmModel} alt="UCM Model" />
</Figure>

Applying UCM model to React, it leads us to separating two entities:

- components whose main responsibility is to translate data (props) into JSX
- classes/components whose main responsibility is to coordinate the components, updating states and integrate with services.

<Figure caption="Applying UCM Model to React">
  <Image src={ucmModelInReact} alt="Applying UCM Model to React" />
</Figure>

<Aside>

For those that had followed React practices for few years, you may realize this structure is similar to the separation of [presentational and container components](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0).

</Aside>

Although UCM model provides guidance on how to organize the code, but without careful design, separating presentational and container components just move the code complexity from one component to another, understanding the code is not easier than not separating them.

To makes our UI code easier to be understood and maintained, we need a model/technique that we can use to organize the code in container component (control object).

## Finite State Machine

A finite state machine (FSM) is a **model** of a system which:

1. can only be in one of a given number of possible states at any moment
1. accepts input events that may outputs (actions) or a change in state.

FSM can be represented with state transition diagram.

[^1]: I am using UI event very loosely here, which includes events emitted by browser as well as emitted by React (lifecycle hooks and `useEffect`).
