---
import { getCollection } from 'astro:content';
import BaseHead from '~/components/BaseHead.astro';
import PageLayout from '~/components/PageLayout.astro';

const notes = await getCollection('note');

const title = 'Notes';
const description =
  'Learning notes on topics, which will be updated over time.';

const { pathname } = Astro.url;

const permalink = new URL(pathname.replace(/\/$/, ''), Astro.site).toString();
---

<html>
  <head>
    <BaseHead title={title} description={description} permalink={permalink} />
  </head>
  <body>
    <PageLayout>
      <span slot="title">{title}</span>
      <span slot="description">{description}</span>
      <ul class="flex flex-col gap-6">
        {
          notes.map((note) => (
            <li>
              <a
                href={`/note/${note.slug}`}
                class="block px-2 border-l-4 border-transparent hover:border-primary-700/40 transition-colors"
              >
                {note.data.title}
              </a>
            </li>
          ))
        }
      </ul>
    </PageLayout>
  </body>
</html>
